<h2 mat-dialog-title>
  @if (!inventory.id) { Nuevo inventario }
  @else { Editar inventario: {{ data.inventoryInfo?.name || '' }} } <!--  Sin el operador (|| '') esto aún funciona, pero marca error en consola -->
</h2>

<form [formGroup]="myForm" (ngSubmit)="registerInventory()" autocomplete="off" >
  <mat-dialog-content class="inputs-container-inventory">
    <div style="width: 100%;">
      <input
        class="simple-input"
        type="text"
        placeholder="Nombre"
        autofocus
        formControlName="name"
        style="width: 100%"
      />
      @if (errorsInTheField('name')) {
        <p class="invalid-status-msg">{{getErrorMessage('name')}}</p>
      }
      @if (inventoryNameErrorMsgAsync && myForm.touched) {
        <p class="invalid-status-msg">{{inventoryNameErrorMsgAsync}}</p>
      }
    </div>
    <div>
      <select name="categories" formControlName="categoryId" style="width: 108%">
        <option value="" selected>Selecciona una categoría</option>
        @for (category of categories; track $index) {
          @if(category.id !== 'Category'){
            <option 
              [value]="category.id"
            >{{ category.name }}</option>
          }
        }
      </select>
    </div>
    <div>
      <div>
        <input
          class="simple-input"
          type="number"
          placeholder="Precio"
          formControlName="price"
          style="width: 100%"
        />
        @if (errorsInTheField('price')) {
          <p class="invalid-status-msg">{{getErrorMessage('price')}}</p>
        }
      </div>
      <div>
        <input
          class="simple-input"
          type="number"
          placeholder="Cantidad"
          formControlName="stock"
          style="width: 100%"
          (input)="validateInteger($event)"
          />
        @if (errorsInTheField('stock')) {
          <p class="invalid-status-msg">{{getErrorMessage('stock')}}</p>
        }
      </div>
    </div>
    <div>
      <select name="units" formControlName="unitId" style="width: 108%">
        <option value="" disabled selected hidden>Unidad</option>
        @for (unit of units; track $index) {
          <option [value]="unit.id">{{ unit.name }}</option>
        }
      </select>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions style="display: flex; justify-content: space-between; margin: 0 1rem 1rem 1rem;">
    <button mat-button [mat-dialog-close]="true" color="warn">Cancelar</button>
    <button type="submit" mat-button color="accent" [disabled]="myForm.invalid || sameInfoFlag">Aceptar</button>
  </mat-dialog-actions>
</form>